# sudoku_solver

Rust로 작성된 스도쿠를 생성하거나, 기존 퍼즐을 풀기 위한 프로그램

## 퍼즐 생성 방법

완성된 스도쿠를 다음과 같이 간단히 생성할 수 있습니다.

```rust
use sudoku_solver_lib::model::table::Table;
use sudoku_solver_lib::solver::Solver;

fn main() {
    let mut t = Table::new_default_16(); // 16x16 스도쿠 구조. 9x9를 생성하기 위해선 Table::new_default_9()을 사용.
    let mut solver = Solver::new(&mut t);

    solver.set_random_seed(0); // 스도쿠의 랜덤 시드 고정. 이걸 빼면 무작위 스도쿠가 만들어짐.
    solver.fill_puzzle_with_timeout(std::time::Duration::MAX);
    println!("{}", solver.get_table());
}
```

### 9x9 스도쿠 퍼즐 생성 출력 결과 예시

```
╔═════╦═════╦═════╗
║9┆8┆6║5┆7┆4║2┆3┆1║
║╌╌╌╌╌║╌╌╌╌╌║╌╌╌╌╌║
║1┆7┆5║2┆3┆9║4┆6┆8║
║╌╌╌╌╌║╌╌╌╌╌║╌╌╌╌╌║
║3┆2┆4║1┆8┆6║5┆7┆9║
╠═════╬═════╬═════╣
║2┆4┆8║6┆1┆7║9┆5┆3║
║╌╌╌╌╌║╌╌╌╌╌║╌╌╌╌╌║
║5┆9┆1║3┆4┆8║7┆2┆6║
║╌╌╌╌╌║╌╌╌╌╌║╌╌╌╌╌║
║6┆3┆7║9┆5┆2║1┆8┆4║
╠═════╬═════╬═════╣
║8┆5┆3║4┆2┆1║6┆9┆7║
║╌╌╌╌╌║╌╌╌╌╌║╌╌╌╌╌║
║7┆1┆9║8┆6┆5║3┆4┆2║
║╌╌╌╌╌║╌╌╌╌╌║╌╌╌╌╌║
║4┆6┆2║7┆9┆3║8┆1┆5║
╚═════╩═════╩═════╝
```

### 16x16 스도쿠 퍼즐 생성 출력 결과 예시

```
╔═══════╦═══════╦═══════╦═══════╗
║1┆6┆4┆A║G┆C┆F┆9║7┆8┆2┆3║B┆D┆5┆E║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║5┆G┆D┆B║2┆4┆7┆A║E┆1┆F┆6║C┆9┆8┆3║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║F┆3┆2┆9║6┆B┆8┆E║5┆A┆C┆D║G┆7┆1┆4║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║E┆C┆8┆7║1┆3┆5┆D║G┆B┆9┆4║2┆A┆6┆F║
╠═══════╬═══════╬═══════╬═══════╣
║9┆7┆6┆G║C┆1┆3┆B║F┆D┆A┆E║5┆4┆2┆8║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║D┆F┆C┆3║E┆6┆G┆4║8┆2┆5┆9║A┆1┆B┆7║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║2┆1┆5┆E║A┆8┆9┆F║B┆7┆4┆C║D┆6┆3┆G║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║8┆B┆A┆4║7┆D┆2┆5║1┆6┆3┆G║F┆E┆C┆9║
╠═══════╬═══════╬═══════╬═══════╣
║7┆4┆B┆C║8┆A┆E┆6║9┆5┆1┆F║3┆G┆D┆2║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║3┆E┆G┆8║B┆F┆C┆2║D┆4┆7┆A║1┆5┆9┆6║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║6┆9┆1┆2║5┆7┆D┆G║3┆E┆8┆B║4┆F┆A┆C║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║A┆D┆F┆5║4┆9┆1┆3║6┆C┆G┆2║7┆8┆E┆B║
╠═══════╬═══════╬═══════╬═══════╣
║G┆5┆E┆F║9┆2┆B┆8║A┆3┆D┆7║6┆C┆4┆1║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║4┆2┆3┆6║F┆5┆A┆1║C┆G┆E┆8║9┆B┆7┆D║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║C┆A┆9┆D║3┆E┆6┆7║4┆F┆B┆1║8┆2┆G┆5║
║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║╌╌╌╌╌╌╌║
║B┆8┆7┆1║D┆G┆4┆C║2┆9┆6┆5║E┆3┆F┆A║
╚═══════╩═══════╩═══════╩═══════╝
```


## 커스텀 스도쿠 생성방법

9x9 스도쿠의 경우 총 81개의 cell이 존재하며, 이러한 cell은 각각 복수개의 Zone에 속할 수 있습니다. 이러한 Zone은 스도쿠 퍼즐이 지켜야만 하는 제약조건을 나타냅니다.

예를들어 9x9 스도쿠에서는 가로, 세로, 3x3 칸 내에서 모두 중복이 없어야하기에 모든 cell은 3개의 Zone에 속하고 있습니다.

만약 여기서 대각선 중복 금지 규칙을 추가할 경우 일부 cell은 4개의 Zone을 가지게 되며, 이렇게 Zone을 수정하는 것으로 커스텀 스도쿠를 만들 수 있습니다.


### 직소 스도쿠 생성 예시

다음은 Zone을 커스터마이징하여 직소 스도쿠를 생성하는 예시입니다.

#### 생성할 직소 스도쿠의 모습
![직소](https://user-images.githubusercontent.com/104359503/208801798-49cba9ef-fd7e-4635-8caf-9a2e0576a614.png)

#### 직소 스도쿠 생성 코드 예시
```rust
use sudoku_solver_lib::model::cell::Cell;
use sudoku_solver_lib::model::table::Table;
use sudoku_solver_lib::model::table_lock::TableLock;
use sudoku_solver_lib::model::zone::Zone;
use sudoku_solver_lib::solver::Solver;

pub fn new_jigsaw() -> TableLock<9> {
    let zone: [usize; 81] = [
        1, 1, 1, 1, 1, 2, 2, 2, 2, 4, 1, 1, 1, 3, 3, 2, 2, 2, 4, 4, 1, 3, 3, 3, 3, 2, 2, 4, 4, 4,
        5, 5, 3, 3, 3, 6, 4, 4, 5, 5, 5, 5, 5, 6, 6, 4, 7, 7, 7, 5, 5, 6, 6, 6, 8, 8, 7, 7, 7, 7,
        9, 6, 6, 8, 8, 8, 7, 7, 9, 9, 9, 6, 8, 8, 8, 8, 9, 9, 9, 9, 9,
    ]; // 직소 스도쿠의 모양

    let mut cells: Vec<Vec<Cell<9>>> = Vec::with_capacity(9);
    for y in 0..9 {
        let mut row: Vec<Cell<9>> = Vec::with_capacity(9);
        for x in 0..9 {
            let index = zone[x + y * 9];

            let this_zone = vec![
                Zone::new_unique_from_usize(index),  // cell이 속해있는 직소 모양
                Zone::new_unique_from_usize(x + 10), // cell이 속한 세로
                Zone::new_unique_from_usize(y + 19), // cell이 속한 가로
            ];
            let cell = Cell::new(x, y, this_zone);

            row.push(cell);
        }
        cells.push(row);
    }

    Table::new_with_vec_cells(cells)
}

fn main() {
    let mut t = new_jigsaw();
    let mut solver = Solver::new(&mut t);

    solver.set_random_seed(0); // 스도쿠의 랜덤 시드 고정. 이걸 빼면 무작위 스도쿠가 만들어짐.
    solver.fill_puzzle_with_timeout(std::time::Duration::MAX);
    println!("{}", solver.get_table());
}
```

#### 직소 스도쿠 퍼즐 생성 출력 결과 예시

```
╔═════════╦═══════╗
║9┆1┆6┆2┆3║4┆5┆7┆8║
╠══╌╌╌╌╌══╩═╗╌╌╌╌╌║
║1║8┆7┆4║9┆5║3┆2┆6║
║╌╌═╗╌══╝╌╌╌╚═╗╌╌╌║
║3┆4║5║6┆8┆2┆7║9┆1║
║╌╌╌╚═╬═══╗╌╌╌╚═╦═╣
║8┆6┆2║7┆5║1┆4┆3║9║
║╌╌╌══╝╌╌╌╚═══╦═╝╌║
║5┆9║3┆8┆4┆6┆2║1┆7║
║╌╌═╩═══╗╌╌╌══╝╌╌╌║
║7║2┆4┆5║1┆9║8┆6┆3║
╠═══╗╌╌╌╚═══╬═╗╌╌╌║
║2┆3║9┆1┆7┆8║6║5┆4║
║╌╌╌╚═╗╌╌╌══╝╌╚═╗╌║
║4┆5┆1║3┆6║7┆9┆8║2║
║╌╌╌╌╌╚═╦═╝╌╌╌╌╌╚═╣
║6┆7┆8┆9║2┆3┆1┆4┆5║
╚═══════╩═════════╝
```


## 현재 구현 상태
* Single
* Naked Pair, Naked Triple, Naked Quad 등..
* Box Line Reduction
* 구현된 알고리즘으로 풀 수 없을 경우 무작위 Guess 및 Guess가 잘못되었을 경우 Rollback
* 멀티스레딩 지원

## TODO
* 더 많은 Solver 알고리즘 구현
* 출력 결과물을 더 보기좋게 제공 (직소 스도쿠의 경우 출력이 난잡해짐)
* 완성된 퍼즐에 구멍을 뚫어 스도쿠 문제 생성 (진행중)
